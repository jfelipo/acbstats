<!DOCTYPE HTML>
<html><head>
    <meta charset="UTF-8">
    <title>NBA Statistics Viewer</title>
    <!-- vendor this? -->
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="dist/viewer_duckdb.js"></script>
<style>
pre {
  margin: 0px;
}
text.label {
  font: 12px sans-serif;
}
text.pointLabel {
  font: 10px sans-serif;
}
</style>
  </head>
  <body>
    <div>
      <svg id="canvas" width="800" height="800"></svg>
    </div>
    <div style="margin-top: 50px">
      <span>X axis: <select id="statx"></select></span>
      <br>
      Y axis: <select id="staty"></select></span>
      <br>
      <span>radius:
        <select id="radius">
          <option value="8" selected>constant: 8</option>
          <option value="4">constant: 4</option>
        </select>
      </span>
    </div>
    <div style="margin-top: 20px">
        <label for="teamcolors">Team Colors</label><input type="checkbox" id="teamcolors" checked></input>
      </span>
      <span style="margin-left: 40px" id="updated"></span>
    </div>
    <div style="margin-top: 20px" class="settings">
      width: <input type="text" id="settings-width"></input>
      <span style="margin-left: 40px">
        height: <input type="text" id="settings-height"></input>
      </span>
      <br>
      minRadius: <input type="text" id="settings-min-radius"></input>
      <span style="margin-left: 40px">
        maxRadius: <input type="text" id="settings-max-radius"></input>
      </span>
    </div>
    <div style="margin-top: 20px">
      <!-- this field is getting overwritten with "16" for no reason I can figure out at all it is bizarre -->
      filter: <input type="text"
        id="filter"
        value="year='2022' and fga>40"
        style="width: 500px"></input>
      <span style="margin-left: 40px">
        <button id="applyFilter">filter</button>
        <p>
        The filter syntax is a work in progress, and I'll add some UI eventually, but here's some you can try:
        <ul>
          <li><pre>player.usg_pct &gt; 26 &amp;&amp; player.fga &gt; 80</pre></li>
          <li><pre>['BOS', 'MIA', 'BRK'].indexOf(player.team) != -1 &amp;&amp; player.fga &gt; 30</pre></li>
          <li><pre>player.team == 'BOS'</pre></li>
          <li><pre>quantile(player, 'fga', 80) || quantile(player, 'trb', 80)</pre></li>
          <li><pre>player.pts_per_g &gt; 20</pre></li>
          <li><pre>player.fg3a_per_g &gt; 5 &amp;&amp; quantile(player, 'fg3a', 75)</pre></li>
          <li><pre>quantile(stl, 75) and quantile(ast, 75) and year='2022' or (name like '%Thybulle' and year='2022')</pre></li>
        </ul>
      </span>
    </div>
    <hr>
    <ul>
      <li><a href="./teams/">team efficiency graph</a></li>
      <li><a href="https://github.com/llimllib/nbastats/">source code</a></li>
    </ul>
  </body>
</html>
